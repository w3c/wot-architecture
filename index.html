<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Web of Things (WoT) Architecture</title>
    <script class="remove" async="" src="https://www.w3.org/Tools/respec/respec-w3c-common"></script>
    <script class="remove">
          var respecConfig = {
              specStatus:     "ED"
            , processVersion: 2017
            , shortName:      "wot-architecture"
            , copyrightStart: 2017
            , wg:             "Web of Things Working Group"
            , wgURI:          "https://www.w3.org/WoT/WG/"
            , wgPublicList:   "public-wot-wg"
            , edDraftURI:     "https://w3c.github.io/wot-architecture/"
            , githubAPI:      "https://api.github.com/repos/w3c/wot-architecture"
            , issueBase:      "https://www.github.com/w3c/wot-architecture/issues"
            , editors: [
                {
                  name:       "Kazuo Kajimoto"
                , w3cid:      "74112"
                , company:    "Panasonic Corp."
                , companyURL: "https://www.panasonic.com/"
                }
              , {
                  name:       "Matthias Kovatsch"
                , w3cid:      "75998"
                , company:    "Siemens AG"
                , companyURL: "https://www.siemens.com/"
                }
              , {
                  name:       "Uday Davuluru"
                , w3cid:      "92757"
                , company:    "RWE AG"
                , companyURL: "https://www.lemonbeat.com/"
                }
              ]
            , otherLinks: [
                {
                  key: "Contributors"
                , data: [
                    {
                      value: "In the GitHub repository"
                    , href: "https://github.com/w3c/wot-architecture/graphs/contributors"
                    }
                  ]
                }
              , {
                  key: "Repository",
                  data: [
                    {
                      value: "We are on GitHub",
                      href: "https://github.com/w3c/wot-architecture/"
                    }
                  , {
                      value: "File a bug",
                      href: "https://github.com/w3c/wot-architecture/issues"
                    }
                  ]
                }
              ]
            , localBiblio: {
                "CoRE-RD" : {
                  href: "https://tools.ietf.org/html/draft-ietf-core-resource-directory-11"
                , title: "CoRE Resource Directory"
                , status:    "Internet-Draft"
                , publisher: "IETF"
                , date: "03 July 2017"
                }
              }
            };
    </script>
  </head>
  <body>
    <section id="abstract">
      <p>
        The W3C Web of Things (WoT) is intended to enable interoperability across IoT Platforms and application domains.
        Primarily, it provides mechanisms to formally describe IoT interfaces
        to allow IoT devices and services to communicate with each other,
        independent of their underlying implementation,
        and across multiple networking protocols.
        Secondarily, it provides a standardized way to define and program IoT behavior.
      </p>
      <p>
        This document describes the abstract architecture for the W3C Web of Things.
        It is derived from a set of use cases and can be mapped onto a variety of concrete deployment scenarios,
        several examples of which are given.
        This document is focused on the standardization scope of W3C WoT,
        which consists of three initial building blocks
        that are briefly introduced and their interplay explained.
      </p>
      <p>
        The WoT Thing Description (TD) provides a formal mechanism to describe the network interface
        provided by IoT devices and services, independent of their implementation.
        Provision of a TD is the primary requirement for a device to participate in the Web of Things.
        In fact, defining a Thing Description for an existing device allows that device to
        participate in the Web of Things without having to make any modifications to the device itself.
        WoT Binding Templates define how a WoT device communicates using a concrete protocol.
        The WoT Scripting API&mdash;whose use is not mandatory&mdash;provides a convenient mechanism to discover, consume, and expose Things based on the WoT Thing Description.
      </p>
      <p>
        Other non-normative architectural blocks and conditions underlying the Web of Things are also
        described in the context of deployment scenarios.
        In particular, recommendations for security and privacy are included,
        while the goal is to preserve and support existing device mechanisms and properties.
        In general, W3C WoT is designed to describe what exists rather than to prescribe what to implement.
      </p>
    </section>

    <section id="sotd">
      <p class="ednote" title="The W3C WoT WG is asking for feedback">
        Please contribute to this draft using the <a href="https://github.com/w3c/wot-architecture/issues">GitHub Issue</a> feature of the <a href="https://github.com/w3c/wot-architecture/">WoT Architecture</a> repository.
        For feedback on security and privacy considerations, please use the <a href="https://github.com/w3c/wot-security/issues">WoT Security and Privacy</a> Issues, as they are cross-cutting over all our documents.
      </p>
    </section>

    <section>
      <h1>Introduction</h1>
      <p>
        The "Web of Things" (WoT) started as an academic initiative in the form of publications and, starting in 2010, a yearly <a href="https://webofthings.org/events/">International Workshop on the Web of Things</a>.
        Its goal is to improve interoperability as well as usability in the Internet of Things (IoT).
        With the increasing role of IoT services using other web standards in commercial and industrial applications,
        the W3C chartered an <a href="https://www.w3.org/WoT/IG/">Interest Group</a> in 2015
        to identify technological building blocks for Recommendation Track standardization.
        With the WoT <a href="https://www.w3.org/WoT/WG/">Working Group</a> chartered end of 2016, the first set of WoT building blocks is now being standardized:
      </p>
      <ul>
        <li>the <a href="https://w3c.github.io/wot-thing-description/">WoT Thing Description</a>,</li>
        <li>the <a href="https://w3c.github.io/wot-binding-templates/">WoT Binding Templates</a>, and</li>
        <li>the <a href="https://w3c.github.io/wot-scripting-api/">WoT Scripting API</a>.</li>
      </ul>
      <p>
        This document serves as an umbrella for the W3C WoT draft specifications
        and defines the basics such as terminology and the underlying abstract architecture of the W3C Web of Things.
        In particular, the purpose of this document is to provide
      </p>
      <ul>
        <li>a set of use cases that lead to the W3C WoT Architecture,
        <li>a set of requirements for WoT implementations,</li>
        <li>an overview of the WoT building blocks being standardized and their interplay,</li>
        <li>a guideline to map the abstract architecture to software stacks and hardware components,</li>
        <li>and security considerations to be aware of when implementing WoT building blocks.</li>
      </ul>
    </section>

    <section>
      <h2>Terminology</h2>
      <p>
        This document uses the following terms as defined here.
        The WoT prefix is used to avoid ambiguity for terms that are defined specifically for Web of Things concepts.
      </p>
      <p class="ednote">
        Please refer to <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md">this markdown file</a>.
        Once the terminology definitions are stable, they will be included here.
      </p>
      <dl class="remove">
        <dt><dfn id="Term">Term</dfn></dt>
        <dd>Definition</dd>
        <!-- Add other as needed -->
      </dl>
    </section>

    <section id="sec-use-cases" class="informative">
      <h1>Use Cases</h1>
      <p>
        This section presents the use cases targeted by the W3C WoT and which are used to derive the abstract architecture discussed in <a href="#sec-building-blocks"></a>.
        While Smart Home use cases might appear predominant in this section,
        they should be seen as simply a vehicle to identify fundamental requirements inherent to most application domains.
        The Smart Home domain is suitable for identifying such general requirements, as most stakeholders can relate to it.
      </p>

      <section>
        <h2>Smart Home</h2>
        <p>
          The Smart Home is one of the application domains targeted by W3C WoT.
          As stated above its use cases are eligible to convey the fundamental requirements on discovery, connectivity, and provided functionality.
          Also security has become a central issue in consumer systems.
          Furthermore, Smart Home use cases have stronger privacy requirements than commercial and industrial ones.
          In general, however, the fundamental aspects of the Smart Home use cases given also apply to other use cases.
        </p>

        <section>
          <h3>Device Controllers</h3>
          <p>
            The first use case is a local device controlled by user-operated remote controller as depicted in <a href="#smart-home-deive"></a>.
            For example, an electronic appliance such as an air conditioner with Web server functionality might be connected directly to a local home network.
            A remote controller can access the air conditioner through the local home network directly.
            In this case, the remote controller can be realized by a browser or native application.
          </p>
          <figure id="smart-home-deive">
            <img src="images/smart-home-device.png" style="width: 500px;" />
            <figcaption>Device Control</figcaption>
          </figure>
        </section>

        <section>
          <h3>Thing-to-Thing</h3>
          <p>
            <a href="#smart-home-t2t"></a> shows an example of direct Thing-to-Thing interaction.
            The scenario is as follows:
            when a sensor detects the room temperature is surpassing a set threshold (e.g., 25&deg;C),
            a control agent issues a "power-on" command to an air conditioner.
          </p>
          <figure id="smart-home-t2t">
            <img src="images/smart-home-t2t.png" style="width: 500px;" />
            <figcaption>Control Agent</figcaption>
          </figure>
        </section>

        <section>
          <h3>Multiple Network Interfaces</h3>
          <p>
            The third use case is a mobile remote controller (e.g., on a smartphone) as shown in <a href="#smart-home-multi"></a>.
            When at home, the smartphone can use Wi-Fi or Bluetooth/BLE to control an electronic appliance locally,
            while outside, it can use the cellular network.
          </p>
          <figure id="smart-home-multi">
            <img src="images/smart-home-multi.png" style="width: 500px;" />
            <figcaption>Multiple Network Interfaces</figcaption>
          </figure>
        </section>

        <section>
          <h3>Gateways</h3>
          <p>
            <a href="#smart-home-gateway"></a> shows a use case based on a Smart Home gateway.
            It is placed between a home network and the Internet.
            The gateway manages electronic appliances inside the house
            and can receive commands from a remote controller over the Internet,
            e.g., from a smartphone as in the previous use case.
          </p>
          <figure id="smart-home-gateway">
            <img src="images/smart-home-gateway.png" style="width: 500px;" />
            <figcaption>Smart Home Gateway</figcaption>
          </figure>
        </section>

        <section>
          <h3>Cloud Proxies</h3>
          <p>
            Cloud proxies can be realized in different ways:
          </p>
          <p class="ednote">
            The complexity of the use cases here increases too quickly. They will be split up to progressively add and explain each new feature.
          </p>
          <section>
            <h4>Cloud-ready Devices</h4>
            <p>
              <a href="#smart-home-cloud1"></a> shows an example where electronic appliances are connected directly to the cloud.
              The cloud mirrors the appliances and, acting as a proxy, can receive commands from remote controllers (e.g., a smartphone).
              Authorized controllers can be located anywhere, as the proxy is globally reachable.
            </p>
            <figure id="smart-home-cloud1">
              <img src="images/smart-home-cloud1.png" style="width: 500px;" />
              <figcaption>Proxies with Cloud-ready Devices</figcaption>
            </figure>
          </section>

          <section>
            <h3>Legacy Devices</h3>
            <p>
              <a href="#smart-home-cloud2"></a> shows an example where legacy electronic appliances cannot directly connect to the cloud.
              Here, a gateway is needed to relay the connection.
              The gateway works as:
            </p>
            <ul>
              <li>integrator of a variety of legacy communication protocols
              both in the physical and logical view</li>
              <li>firewall toward the Internet</li>
              <li>privacy filter which substitutes real image and/or speech, and
              logs data locally</li>
              <li>local agent in case the Internet connection is interrupted</li>
              <li>emergency services running locally when fire alarms and similar events occur</li>
            </ul>
            <p>
              The cloud mirrors the gateway with all connected appliances and acts as an agent that manages them in the cloud in conjunction with the gateway.
              Furthermore, the cloud can receive commands from remote controllers (e.g., a smartphone), which can be located anywhere.
            </p>
            <figure id="smart-home-cloud2">
              <img src="images/smart-home-cloud2.png" style="width: 500px;" />
              <figcaption>Proxies with Legacy Devices</figcaption>
            </figure>
          </section>
        </section>
      </section>

      <section>
        <h2>Smart Factory</h2>
        <p>
          <a href="#smart-factory"></a> shows an example of a Smart Factory.
          In this case, cell controllers automate factory equipment with specialized communication such as RS-485 or EtherCAT.
          Line controllers orchestrate multiple cell controllers over IP-based networks.
          A factory controller integrates different line controllers.
          A cloud service collects data from the factory controller and analyzes them for predictive maintenance.
          Users can monitor the factory through a dashboard.
          Note that factories usually do not reveal the internal topology of their lines and cells.
        </p>
        <figure id="smart-factory">
          <img src="images/smart-factory.png" style="width: 640px;" />
          <figcaption>Smart Factory</figcaption>
        </figure>
      </section>

      <section>
        <h3>Connected Car</h3>
        <p>
          <a href="#connected-car"></a> shows an example of a Connected Car.
          In this case, a gateway connects to car components through CAN and to the car navigation system through a proprietary interface.
          Services running in the cloud collect data pushed from car components  and analyze the data from multiple cars to determine traffic patterns.
          The gateway can also consume cloud services, in this case, to get traffic data and show it to the driver through the car navigation system.
        </p>
        <figure id="connected-car">
          <img src="images/connected-car.png" style="width: 500px;" />
          <figcaption>Connected Car</figcaption>
        </figure>
      </section>
    </section>

    <section id="sec-requirements" class="informative">
      <h1>Functional Requirements</h1>
      <p>
        This section defines the properties required in an abstract Web of Things (WoT) architecture.
      </p>
      <section id="sec-requirements-flexibility">
        <h2>Flexibility</h2>
        <p>
          There are a wide variety of physical device configurations for WoT implementations.
          The WoT abstract architecture should be able to be mapped to and cover all of the variations.
        </p>
      </section>
      <section id="sec-requirements-compatibility">
        <h2>Compatibility</h2>
        <p>
          We already have many existing IoT solutions and ongoing IoT
          standardization activities in many business fields.
          The WoT should provide a bridge between these existing and developing IoT
          solutions and Web technology based on WoT concepts.
          The WoT should be upwards compatible with existing IoT solutions and current standards.
        </p>
      </section>
      <section id="sec-requirements-security">
        <h2>Security and Privacy</h2>
        <p class="ednote">
          This section will likely undergo significant revision and reorganization.
          Please see the
          <a href="https://github.com/w3c/wot-security/">WoT Security and Privacy</a>
          repository for work in progress.
          In particular, the <a href="https://github.com/w3c/wot-security/blob/master/wot-threat-model.md">WoT Threat Model</a>
          defines the main WoT security stakeholders, assets, attack surfaces, and threats.
        </p>
        <p><!-- Requirements -->
          The functional WoT architecture should enable the use of
          best practices in security and privacy.
      <!-- TODO: "best practices" needs a citation.
               IIC Security Framework works for industrial use cases; what about home? -->
          Generally,
          the WoT security architecture must support the
          goals and mechanisms of the IoT protocols and systems it
          connects to.
          These systems vary in their security requirements
          and risk tolerance,
          so security mechanisms will also vary
          based on these factors.
          However, the WoT architecture
          needs to do no harm:
          it should support security and privacy
          at least as well as the systems it connects to.
        </p>
        <p><!-- Definition -->
          Security means the system should
          preserve its integrity and functionality even when subject to attack.
          Privacy means that the system should maintain the
          confidentiality of personally identifiable information.
          In general,
          security and privacy cannot be guaranteed but the
          WoT architecture should support best practices.
        </p>
        <p><!-- Motivation -->
          Security and privacy are especially important in the IoT
          domain since IoT devices need to operate autonomously
          and in many cases have access to both personal data and/or
          can be in control of safety-critical systems.
          Compared to personal systems,
          IoT devices are subject to
          different and in some cases higher risks than IT systems.
          It is also
          important to protect IoT systems so that they can not be
          used to launch attacks on other computer systems.
        </p>
      </section>
    </section>

    <section id="sec-building-blocks">
      <h1>WoT Building Blocks</h1>
      <p>
        This section presents the initial WoT building blocks that build up the abstract architecture for the Web of Things.
        This architecture is derived from the use cases in Section <a href="#sec-use-cases"></a> and the requirements in Section <a href="#sec-requirements"></a>.
        <a href="#architecture-abstract"></a> summarizes the high-level goals and requirements and shows the three levels where the WoT building blocks can be applied:
      </p>
      <ul>
        <li>the device level,</li>
        <li>the gateway level (or "edge"), and</li>
        <li>the cloud level.</li>
      </ul>
      <figure id="architecture-abstract">
        <img src="images/architecture-abstract.png" style="width: 100%;" />
        <figcaption>Abstract Architecture of W3C WoT</figcaption>
      </figure>
      <p>
        <a href="#architecture-concept"></a> shows a conceptional view of how a component in the WoT Architecture makes use of the WoT building blocks.
        Each block is described in more detail in the following sections.
      </p>
      <figure id="architecture-concept">
        <img src="images/architecture-concept.png" style="width: 640px;" />
        <figcaption>Conceptional Architecture of the WoT Building Blocks</figcaption>
      </figure>

      <section id="sec-building-blocks-thing">
        <h2>Thing</h2>
        <p>
          A <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a> is the abstraction of a physical or virtual entity that needs to be represented in IoT applications.
          This entity can be a device,
          a logical component of a device,
          a local hardware component,
          or even a logical entity such as a location (e.g., room or building).
        </p>
        <p>
          <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a> provide a network-facing API for interaction (<a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-interface">WoT Interface</a>) based on a formal model.
          These <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-interface">WoT Interfaces</a> are a superset of Web APIs, as <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a> can also be available over non-Web protocols such as MQTT or ZigBee.
          The outward-facing <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-interface">WoT Interface</a> is not to be confused with the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-scripting-api">Scripting API</a>, which is optional and interfaces with application scripts inside the software stack of a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a>.
        </p>
        <p>
          There can be <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a>, however, that do not provide a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-interface">WoT Interface</a> and only consist of metadata that is relevant to the application (e.g., the room in which devices are located).
          In W3C WoT however, a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a> must have a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">Thing Description</a>; therefore, everything that has a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">Thing Description</a> is a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a>.
        </p>
      </section>

      <section id="sec-building-blocks-thing-description">
        <h2>WoT Thing Description</h2>
        <p>
          The <a href="https://w3c.github.io/wot-thing-description/">WoT Thing Description</a> (TD) is structured data that adheres to a formal model and closes the gap between Linked Data vocabularies and functional APIs of IoT systems.
          It can be seen as the "HTML for Things".
          A <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-td">TD</a> provides general metadata of a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a> as well as metadata about the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-interaction">Interactions</a>, data model, communication, and security mechanisms of a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a>.
          Usually, <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-td">TDs</a> make use of domain-specific metadata for which WoT provides explicit extension points.
          However, any <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-domain-specific-vocabulary">domain-specific vocabulary</a> is out-of-scope of the W3C standardization activity.
        </p>
        <p>
          The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">WoT Thing Description</a> is built around a formal <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-interaction-model">Interaction Model</a>
          that can support multiple messaging paradigms (i.e, request-response, publish-subscribe, and message passing).
          The default <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-interaction-pattern">Interaction Patterns</a> are <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-property">Property</a>, <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-action">Action</a>, and <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-event">Event</a>.
          These were found to be able to cover the network-facing APIs provided by most IoT Platforms.
          <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-property">Properties</a> abstract data points that can be read and often written.
          <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-action">Actions</a> abstract invokable processes that may run for a certain time; yet they can also abstract RPC-like interactions in general.
          <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-event">Events</a> abstract interactions where the remote endpoint pushes data asynchronously.
        </p>
        <p>
          <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">Thing Descriptions</a> are serialized to JSON-LD [[!JSON-LD]] by default.
          More serialization formats are planned in the future, in particular more concise formats for resource-constrained <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a>.
          For now, JSON-LD offers a good trade-off between machine-understandable semantics and usability for developers.
        </p>
        <p>
          <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">Thing Descriptions</a> can be managed in
          <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-directory">Thing Directories</a>, which are aligned with the CoRE Resource Directory [[CoRE-RD]].
          They provide a Web interface for registration, registration updates, and removal, and automatic removal after a given lifetime expired without registration update.
          <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-directory">Thing Directories</a> also provide a Web interface for lookups, usually including a SPARQL endpoint for semantic queries in addition to simple CoRE Resource Directory [[CoRE-RD]] lookups.
        </p>
        <p>
          The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">WoT Thing Description</a> fosters interoperability in two ways:
          First, and foremost, <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-td">TDs</a> enable machine-to-machine communication in the Web of Things.
          Second, <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-td">TDs</a> can serve as a common, uniform format for developers to document and retrieve all details necessary to access IoT devices and make use of their data.
        </p>
      </section>

      <section id="sec-building-blocks-binding-templates">
        <h2>WoT Binding Templates</h2>
        <p>
          A great challenge for the WoT is to enable interactions with a myriad of different IoT Platforms (e.g., OCF, oneM2M, RESTful devices not following any particular standard but providing an HTTP or CoAP interface, etc.).
          The IoT uses a variety of protocols for accessing devices, since no one protocol is appropriate in all contexts.
          W3C WoT is tackling this variety by including communication metadata
          in the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">Thing Description</a>.
          This metadata can be
          used to configure the communication stack to produce compliant messages for a wide variety of target <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-iot-platform">IoT Platforms</a> and protocols.
        </p>
        <p>
          The <a href="https://w3c.github.io/wot-binding-templates/">WoT Binding Templates</a> are an informal collection of communication metadata blueprints that explain how to interact with different <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-iot-platform">IoT Platforms</a>.
          When creating a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">Thing Description</a> for a particular device,
          the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-binding-templates">Binding Template</a> for the corresponding <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-iot-platform">IoT Platform</a> can be used and instantiated in the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">Thing Description</a> for that device.
        </p>
        <figure id="binding-templates">
          <img src="images/binding-templates.png" style="width: 800px;" />
          <figcaption>From Binding Templates to Protocol Bindings</figcaption>
        </figure>
        <p>
          <a href="#binding-templates"></a> shows how <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-binding-templates">Binding Templates</a> are applied.
          A <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-binding-templates">WoT Binding Template</a> is created only once for each <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-iot-platform">IoT Platform</a>
          and then instantiated, and hence reused in all <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-td">TDs</a> for its devices.
          The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-client">WoT Client</a> consuming that <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-td">TD</a> must implement the corresponding <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-protocol-binding">Protocol Binding</a> to be able to interact with the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a> described.
          The communication metadata of a Binding spans four dimensions:
        </p>
        <ul>
          <li>
            <b>IoT Platform:</b>
            <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-iot-platform">IoT Platforms</a> often introduce proprietary tweaks to protocols such as platform-specific HTTP header fields or CoAP options.
            This spans another dimension within the transfer protocol used.
            Usually, these tweaks can be described with standard <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-td-vocabulary">TD Vocabulary</a>.
            If not, platform-specific vocabulary along with a corresponding <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-protocol-binding">Protocol Binding</a> implementation is required.
          </li>
          <li>
            <b>Transfer Protocol:</b>
            The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">WoT Thing Description</a> comes with vocabulary to identify standard protocols (e.g., HTTP, CoAP, WebSockets, or MQTT).
            Their configuration (e.g., port or variations such as HTTP long-polling [[!RFC6202]] to support event notification) is also done through <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-td-vocabulary">TD Vocabulary</a>.
            If a transfer protocol is not covered by the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-td-vocabulary">TD Vocabulary</a>, <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-domain-specific-vocabulary">domain-specific vocabulary</a> can be used.
            This, of course, needs to be backed by a corresponding <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-protocol-binding">Protocol Binding</a> implementation in the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-client">WoT Client</a>.
          </li>
          <li>
            <b>Media Type:</b>
            <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-iot-platform">IoT Platforms</a> often differ in the representation formats (or serializations) used for exchanging data.
            The Internet Meda Type [[!RFC6838]] identifies these formats.
          </li>
          <li>
            <b>Security:</b>
            Security can be applied at different places of the communication,
            and hence opens another dimension of variability.
            Examples are (D)TLS [[!RFC5246]]/[[!RFC6347]], IPSec [[!RFC6071]], OAuth [[!RFC6749]], and ACE [[!RFC7744]].
          </li>
        </ul>
      </section>

      <section id="sec-building-blocks-scripting-api">
        <h2>WoT Scripting API</h2>
        <p>
          The <a href="https://w3c.github.io/wot-scripting-api/">WoT Scripting API</a> is an optional building block that eases IoT application development.
          Traditionally, device logic is implemented in firmware, which underlies the productivity constraints of embedded development.
          The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-scripting-api">WoT Scripting API</a> enables having a runtime system for IoT applications similar to a Web browser, and aims to improve productivity and reduce integration costs.
          Furthermore, standardized APIs enable portability for application modules,
          for instance, to move compute-intense logic from a device up to a local gateway,
          or to move time-critical logic from the cloud down to a gateway or edge node.
        </p>
        <p>
          The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-scripting-api">Scripting API</a> is built on top of the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a> abstraction and the TD <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-interaction-model">Interaction Model</a>.
          There are three sub APIs:
        </p>
        <ul>
          <li><b><code>WoT</code> object</b> as API entry point to discover, consume, and expose <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a></li>
          <li><b><code>ConsumedThing</code> interface</b> as Cient API to and consume <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a> over the network or locally (e.g., physically attached hardware)</li>
          <li><b><code>ExposedThing</code> interface</b> as Server API to configure and expose <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a> over the network</li>
        </ul>
      </section>
    </section>

    <section id="sec-servient-architecture">
      <h1>WoT Servient Architecture</h1>
      <p>
        A <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> is a software stack that implements the WoT building blocks presented in the previous section.
        <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servients</a> can host and expose <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a> and/or consume <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a>.
        Thus, <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servients</a> can perform in both the server and client roles; the name (a portmanteau of server and client) is based on this dual role.
      </p>
      <p>
        The previous <a href="#architecture-concept"></a> shows how the WoT building blocks conceptionally relate to each other.
        When implementing these concepts, a more detailed view is necessary that takes certain technical aspects into account.
        The detailed architecture of a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> is shown in <a href="#architecture-implementation"></a>.
      </p>
      <figure id="architecture-implementation">
        <img src="images/architecture-implementation.png" style="width: 640px;" />
        <figcaption>Implementation View of a Servient</figcaption>
      </figure>
      <p>
        The role and functionality of each module shown in <a href="#architecture-implementation"></a> is as follows:
      </p>

      <section>
        <h2>Application</h2>
        <p>
          <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-application">Applications</a> running on a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> are usually implemented through scripts (i.e., JavaScript).
          These must be provided along with security metadata that defines their <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-execution-environment">Execution Environment</a> and consequently how scripts must be isolated.
          The security metadata also needs to include keying material or certificates to authenticate the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a> the script exposes.
        </p>
        <p>
          Note that the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-scripting-api">WoT Scripting API</a> building block is optional.
          There can be minimal <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> implementations where applications are implemented natively for the software stack.
          These do not have the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-scripting-api">Scripting API</a> and <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-runtime">WoT Runtime</a> modules.
      </section>

      <section>
        <h2>WoT Scripting API</h2>
        <p>
          The standardized <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-scripting-api">WoT Scripting API</a> is the contract between applications and the runtime system of a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a>, the so-called <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-runtime">WoT Runtime</a>.
          The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-scripting-api">WoT Scripting API</a> is equivalent to any platform API, and hence there must be mechanisms to prevent malicious access to the system.
          As mentioned above, this building block, including the underlying WoT Runtime implementation, is optional.
        </p>
        <p>
          See <a href="https://w3c.github.io/wot-scripting-api/">WoT Scripting API</a> for details.
        </p>
      </section>

      <section>
        <h2>WoT Runtime</h2>
        <p>
          The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a> abstraction and <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-interaction-model">Interaction Model</a> is implemented in a runtime system that offers the application-facing <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-scripting-api">WoT Scripting API</a>.
          This <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-runtime">WoT Runtime</a> interfaces with the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-protocol-binding">Protocol Bindings</a> to access remote <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a> and with the system API to access local hardware and proprietary means for communication.
          Note that both local hardware and devices behind proprietary communications protocols are also represented as <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a> in the runtime environment,
          that is, they are also accessed through the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-client-api">Client API</a>.
          The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-runtime">WoT Runtime</a> is also tasked with generating the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">Thing Description</a>
          based on the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> metadata (e.g., location), application metadata (e.g., provided <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-interaction">Interactions</a>), and available <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-protocol-binding">Protocol Bindings</a> (e.g., implemented <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-binding-templates">WoT Binding Templates</a>).
        </p>
      </section>

      <section>
        <h2>Protocol Bindings</h2>
        <p>
          <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-protocol-binding">Protocol Bindings</a> are implementations of the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-binding-templates">Binding Templates</a>.
          They produce the messages to interact with <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a> over the network
          based on the information given in the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">Thing Description</a> of the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-consumed-thing">Consumed Thing</a>.
          <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servients</a> usually have multiple <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-protocol-binding">Protocol Bindings</a> to enable interaction with different <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-iot-platform">IoT Platforms</a>.
        </p>
        <p>
          In many cases, where standard protocols are used, generic protocol stacks can be used to produce the platform-specific messages (e.g., one for HTTP(S) dialects, one for CoAP(S) dialects, and one for MQTT solutions, etc.).
          In this case, the communication metadata from the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">Thing Description</a> is used to select and configure the right stack (e.g., HTTP with the right header fields or CoAP with the right options).
          Parsers and serializers for the expected representation format identified by the Internet Media Type can also be shared across these generic protocol stacks.
        </p>
        <p>
          In some cases, where no aspects can be shared,
          the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-protocol-binding">Protocol Binding</a> is more comparable to a platform-specific driver that is selected and configured through the communication metadata in similar way as above.
        </p>
        <p>
          See <a href="https://w3c.github.io/wot-binding-templates/">WoT Binding Templates</a> for details.
        </p>
      </section>

      <section>
        <h2>System API</h2>
        <p>
          The implementation of a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a> may access local hardware or system services (e.g. storage) through proprietary APIs or other means.
          This block is out of scope of WoT standardization.
        </p>
        <p>
          A <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-runtime">WoT Runtime</a> may provide local hardware or system services to application scripts through the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a> abstraction, as if they were accessible over a network protocol.
          In this case the implementation should be optimized to avoid the overhead that would be involved in a literal implementation
          of a network protocol while maintaining a consistent <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-interface">WoT Interface</a>.
          The details of such "System Things" are out of the scope of standardization at present, although W3C WoT will document several informational examples.
        </p>
        <p>
          A device may be physically external to a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a>, but connected via proprietary protocols.
          In this case, the implemented runtime environment may access legacy devices with such protocols (e.g., Echonet Lite, X10, I2C, SPI) through proprietary APIs,
          but again exposes them to applications as <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a>  through the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-scripting-api">Scripting API</a>.
          A script can then act as gateway to the legacy devices.
          This should only be done if the legacy device cannot be described using the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">WoT Thing Description</a>.
        </p>
      </section>

      <!--
      <section>
        <h2>Servient Variations</h2>
        <p>
          sd
          <a href="#architecture-minimal"></a> showed how the building blocks work together in a conceptional view.
        </p>
        <figure id="architecture-minimal">
          <img src="images/architecture-minimal.png" style="width: 640px;" />
          <figcaption>Implementation View of a Servient</figcaption>
        </figure>
      </section>
      -->

      <section>
        <h2>WoT in the Web Browser</h2>
        <p class="ednote">
          This section is an early outline to realize WoT with the existing browser APIs.
          More details and a native WoT integration into the Web browser will be added as the WG drafts progress.
        </p>
        <p>
          <a href="#architecture-browser"></a> shows how a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> implementation for Web browsers would look like.
        </p>
        <figure id="architecture-browser">
          <img src="images/architecture-browser.png" style="width: 640px;" />
          <figcaption>Implementing WoT in the Web Browser</figcaption>
        </figure>
        <p>
          The Web browser implicitly isolates applications in tabs using the <a href="https://www.w3.org/Security/wiki/Same_Origin_Policy">same-origin policy</a>.
          Thus, the security metadata is not mandatory.
          The application scripts would be part of a Web page that can provide visualization and user interaction.
        </p>
        <p>
          The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-scripting-api">WoT Scripting API</a> needs to be added by a WoT library loaded together with the application scripts by the Web page.
          This library would also implement <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-td">TD</a> handling (i.e., parsing for consuming <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a> and generating for exposing <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a>) and provide glue code to use the browser APIs.
          The other aspects of the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-runtime">WoT Runtime</a> are provided by the browser JavaScript runtime system.
        </p>
        <p>
          The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-protocol-binding">Protocol Bindings</a> are limited to the protocols implemented by Web browsers.
          These are:
        </p>
        <ul>
          <li>HTTP(S) (1.0/1.1/2.0) [[!RFC7230]]/[[!RFC7540]] (including Server-Sent Events [[!HTML5]]),</li>
          <li>WebSockets [[!RFC6455]] (which enables the WoT library to implement MQTT-over-WebSockets and CoAP-over-WebSockets)
          <li>(S)RTP of WebRTC [[!WEBRTC]], and</li>
          <li>FTP [[!RFC765]] (which might be of limited use similar to the file protocol)</li>
        </ul>
        <p>
          The other browser APIs (e.g., Geolocation, Vibration, and Web Storage) are comparable to the System API of normal <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servients</a> and can enable access to local hardware.
        </p>
      </section>
    </section>

    <section>
      <h1>WoT Deployment Scenarios and Guidelines</h1>
      <p>
        There are many possibilities for deploying the abstract WoT Architecture and mapping the functions to physical devices and network structures.
        This section, which is informative but not normative, lists a number of design patterns that may be used when implementing the Web of Things.
      </p>

      <section>
        <h2>WoT Client</h2>
        <figure id="wot-existing">
          <img src="images/wot-existing.png" style="width: 500px;" />
          <figcaption>Servient Consuming Thing</figcaption>
        </figure>
        <p>
          <a href="#wot-existing"></a> shows the basic scenario,
          where a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> in client role, a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-client">WoT Client</a>, is consuming an existing device that is augmented with a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">Thing Description</a> (TD).
          The latter could be generated from digital descriptions already available for the device within the corresponding the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-iot-platform">IoT Platform</a>.
          It could also be written by a developer using tools or even manually.
        </p>
        <p>
          The Application Script is loaded and executed by the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-runtime">WoT Runtime</a>.
          Scripts can be manually configured with the URI of the device <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-td">TD</a> located on a reachable Web server.
          Using the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-object"><code>WoT</code> object</a>, the Application Script retrieves the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-td">TD</a> and instantiates a corresponding <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-consumed-thing">Consumed Thing</a>.
          The Application Script can use the metadata of the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a> and inspect what <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-interaction">Interactions</a> it provides.
          The communication metadata within the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-td">TD</a> is used by the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> to select the matching <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-protocol-binding">Protocol Binding</a> and to configure its protocol stack.
          These communication details are hidden from the Application Script.
          However, the script can only interact with the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a>,
          if the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> implements a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-protocol-binding">Protocol Binding</a> that matches the communication metadata given in the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-td">TD</a>.
        </p>
        <p>
          Using the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-client-api">Client API</a> (i.e., <code>ConsumedThing</code> interface), the Application Script can read or write a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-property">Property</a>,
          invoke an <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-action">Action</a>,
          or subscribe for <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-event">Events</a> offered by the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a>.
          The selected <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-protocol-binding">Protocol Binding</a> maps these <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-interaction">Interactions</a> to the low-level protocol operations and serializations understood by the remote <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a>.
          When a message is returned by the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a>, the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-protocol-binding">Protocol Binding</a> parses the response and maps it back to the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-interaction">Interaction</a> abstraction.
          The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-interaction">Interaction</a> output is delivered back to the Application Script by resolving a (JavaScript) Promise.
        </p>
        <p class="ednote">
          Each sub-section shall describe the technical details to realize the scenario.
          They shall describe how to discover the involved WoT components, how to realize connectivity, and what security mechanisms can be used.
          For now, the draft only contains strawman proposals and placeholders that will be replaced as the draft progresses.
        </p>
        <dl>
          <dt>Discovery</dt>
          <dd>
            <ul>
              <li>Manual (Application Script is configured with TD URI)</li>
            </ul>
          </dd>
          <dt>Connectivity</dt>
          <dd>
            <ul>
              <li>Local over (W)LAN or LPWANs (ZigBee, Z-Wave, etc.)</li>
              <li>Remote over globally reachable IP address of the Thing</li>
            </ul>
          </dd>
          <dt>Security</dt>
          <dd>
            <ul>
              <li>Security metadata to sandbox the Application Script</li>
              <li>Access control implemented on the Thing</li>
              <li>Integrity protection when retrieving the TD</li>
              <li>Potentially confidentiality and integrity protection when interacting with the Thing</li>
            </ul>
          </dd>
        </dl>
      </section>
      <section>
        <h2>Servient on Device</h2>
        <figure id="wot-on-device">
          <img src="images/wot-on-device.png" style="width: 640px;" />
          <figcaption>Servient on Device Itself</figcaption>
        </figure>
        <p>
          In this case, a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> is running on the device itself.
          The right most <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> in <a href="#wot-on-device"></a> shows an LED Light,
          whose controller has a powerful CPU and a large memory and is able to provide web server functionality connected directly to the Internet.
          Then the leftmost browser and/or another application on the internet can access the LED light through the Internet directly.
        </p>
        <figure id="wot-on-device-minimal">
          <img src="images/wot-on-device-minimal.png" style="width: 640px;" />
          <figcaption>Resource-constrained Device as Thing</figcaption>
        </figure>
        <p>
          Devices that are not powerful enough to host a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> can still act as <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a>.
          In this case, a classic firmware is providing a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">Thing Description</a> that describes the functionality and protocols implemented.
          The right most <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> in <a href="#wot-on-device-minimal"></a> shows an legacy device
          has a constraint CPU and a small memory and is able to provide web server functionality connected directly to the internet.
          Then the leftmost browser and/or another application on the internet can
          access the device through the internet directly like <a href="#wot-on-device"></a>.
        </p>
        <dl>
          <dt>Discovery</dt>
          <dd>
            <ul>
              <li>WoT Client discovers <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> on the same network [network discovery].</li>
            </ul>
          </dd>
          <dt>Connectivity</dt>
          <dd>
            <ul>
              <li>(W)LAN</li>
              <li>LPWANs (ZigBee, Z-Wave, etc.)</li>
            </ul>
          </dd>
          <dt>Security</dt>
          <dd>
            <ul>
              <li>t.b.d.</li>
            </ul>
          </dd>
        </dl>
      </section>

      <section>
        <h2>Servient on Smartphone</h2>
        <p>
          This example uses a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> running on a Smartphone.
          Smartphones are not only popular but have enough performance to provide gateway functionality.
          This functionality can be used to bridge between the internet and a legacy device without any
          intermediate hardware.
        </p>
        <figure id="wot-on-smartphone">
          <img src="images/wot-on-smartphone.png" style="width: 640px;" />
          <figcaption>Servient on Smartphone</figcaption>
        </figure>
        <p>
          <a href="#wot-on-smartphone"></a> shows an example of a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> on a smartphone,
          which can act as a gateway to existing devices (e.g., via Bluetooth or local Wi-Fi).
          The Web browser with the user interface can either run on the smartphone directly
          or remotely on a separate device (such as a laptop).
        </p>
        <dl>
          <dt>Discovery</dt>
          <dd>
            <ul>
              <li>WoT Client discovers an electronic appliance when the remote controller is nearby [nearby discovery].</li>
              <li>WoT Client discovers <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> remotely when the remote controller is outside [remote discovery].</li>
            </ul>
          </dd>
          <dt>Connectivity</dt>
          <dd>
            <ul>
              <li>t.b.d.</li>
            </ul>
          </dd>
          <dt>Security</dt>
          <dd>
            <ul>
              <li>t.b.d.</li>
            </ul>
          </dd>
        </dl>
      </section>

      <section>
        <h2>Servient on Gateway</h2>
        <figure id="wot-on-gateway">
          <img src="images/wot-on-gateway.png" style="width: 640px;" />
          <figcaption>Servient on Gateway</figcaption>
        </figure>
        <p>
          <a href="#wot-on-gateway"></a> shows an example of a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> on a gateway.
          Gateway are often introduced as a home automation and/or home energy management solution.
          In the case of consumer electronics, there are very wide variety of
          physical communication formats such as WiFi, 802.15.4g, Bluetooth Low
          Energy, HDPLC and so on. In order to normalize those variations,
          almost all home automation systems introduce a gateway.
          In <a href="#wot-on-gateway"></a>, a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> wraps various mechanisms for communicating with legacy
          devices and provides to other clients a universal device accessing method.
          Inside the home, HTTP/TCP/IP/WiFi can then be used as the sole
          unfied communication method between the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> on
          the gateway and a user interface device such as a Web broswer.
        </p>
        <dl>
          <dt>Discovery</dt>
          <dd>
            <ul>
              <li><a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> discovers electronic appliances nearby [nearby discovery].</li>
              <li>WoT Client discovers <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> remotely [remote discovery].</li>
            </ul>
          </dd>
          <dt>Connectivity</dt>
          <dd>
            <ul>
              <li>t.b.d.</li>
            </ul>
          </dd>
          <dt>Security</dt>
          <dd>
            <ul>
              <li>t.b.d.</li>
            </ul>
          </dd>
        </dl>
      </section>

      <section>
        <h2>Servient on Cloud and Gateway</h2>
        <p>
          Client Apps can control devices at home through a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> on a gateway.
          But in this case the location of client apps is restricted to the
          home, because physical communication path "WiFi" and/or wired Ethernet
          between gateway and client apps such as a Web browser is limited
          to the physical domain provided by the WiFi signal.
          To provide for controlling devices at home from outside the house, a
          HTTP/TCP/IP interface to a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a>
          running in the cloud with a globally reachable address could be used.
          However, in this case the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> in the cloud cannot generally access
          devices running in the home through only local interfaces such as Bluetooth.
        </p>
        <figure id="wot-on-cloud">
          <img src="images/wot-on-cloud.png" style="width: 800px;" />
          <figcaption>Servient on Cloud Server and Gateway</figcaption>
        </figure>
        <p>
          <a href="#wot-on-cloud"></a> shows an example of <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> running on
          a cloud server paired with another <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> running on a gateway.
          In the case of <a href="#wot-on-cloud"></a>, a browser accesses the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> on the cloud Server named "Cloud".
          This <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> provides its interface through the Internet globally.
          So, wherever a browser user is, they can access this <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a>.
          The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> on "Cloud" can accept the request of the browser and/or other application through HTTP, CoAP, and so on.
          Then the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> on the cloud server finds out the route to access another <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> on the gateway.
          After finding out the route, the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> on the cloud server transfers
          the request from the browser to the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> on the gateway.
          After that, the gateway processes the request according the <a href="#wot-on-gateway"></a> use case.
          The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">Thing Description</a> of the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> on the cloud server can be just
          a mirror of that on the gateway,
          since it will generally just pass interactions directly through.
          More generally, though, one or both <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servients</a> can provide services such as
          privacy filtering or sub-setting.
          When the user is home, they can also access the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> in the gateway directly.
        </p>
        <dl>
          <dt>Discovery</dt>
          <dd>
            <ul>
              <li><a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> discovers WoT Server remotely [remote discovery].</li>
              <li>WoT Client discovers <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> remotely [remote discovery].</li>
            </ul>
          </dd>
          <dt>Connectivity</dt>
          <dd>
            <ul>
              <li>t.b.d.</li>
            </ul>
          </dd>
          <dt>Security</dt>
          <dd>
            <ul>
              <li>t.b.d.</li>
            </ul>
          </dd>
        </dl>
      </section>

      <section>
        <h2>Servient on Cloud Server</h2>
        <figure id="wot-on-cloud-legacy">
          <img src="images/wot-on-cloud-legacy.png" style="width: 800px;" />
          <figcaption>Servient on Cloud Server Only</figcaption>
        </figure>
        <p>
          <a href="#wot-on-cloud-legacy"></a> shows a second example of <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servients</a> in the cloud.
          In this case, a browser accesses a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> on a cloud server, similar to <a href="#wot-on-cloud"></a>.
          This <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> provides access through the global Internet.
          So, wherever the browser user is, they can access this <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a>.
          The cloud <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> accepts the requests of the browser and/or other applications
          through HTTP, CoAP, etc.
          Then it finds out the route to access a proprietry discovery service running on a gateway.
          In <a href="#wot-on-cloud"></a>, the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> running in the cloud could talk to another <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servient</a> running on the gateway.
          However, many service providers have already provided IoT services using proprietary IoT interfaces or some other IoT standard.
          In this case, the gateway can still support the same functionalities,
          as in the previous case, but using methods outside of the WoT definitions.
        </p>
        <dl>
          <dt>Discovery</dt>
          <dd>
            <ul>
              <li>Servient1 discovers Servient2 remotely [remote discovery].</li>
              <li>Servient2 discovers electronic appliances nearby [nearby discovery].</li>
              <li>WoT Client discovers Servient1 remotely [remote discovery].</li>
            </ul>
          </dd>
          <dt>Connectivity</dt>
          <dd>
            <ul>
              <li>t.b.d.</li>
            </ul>
          </dd>
          <dt>Security</dt>
          <dd>
            <ul>
              <li>t.b.d.</li>
            </ul>
          </dd>
        </dl>
      </section>
    </section>

    <section id="sec-security-considerations">
      <h1>Security and Privacy Considerations</h1>
      <p class="ednote">
        Security and privacy considerations are still under discussion and development; the content below should be considered preliminary.
        Due to the complexity of the subject
        we are considering producing a separate document containing a detailed security and privacy considerations discussion
        including a risk analysis,
        threat model,
        recommended mitigations,
        and appropriate references to best practices.
        A summary will be included here.
        Work in progress is located in the
        <a href="https://github.com/w3c/wot-security/">WoT Security and Privacy</a> repository.
        Please file any security or privacy considerations and/or concerns using the <a href="https://github.com/w3c/wot-security/issues">GitHub Issue</a> feature.
      </p>
      <p><!-- Security requirements for the the WoT -->
        Security is a cross-cutting issue that needs to be taken into account in all
        <a href="#sec-building-blocks">WoT building blocks</a>.
        The W3C WoT does not define any new security mechanisms,
        but provides guidelines to apply the best practices from
        Web security,
        IoT security,
        and information security for general software and hardware considerations.
      </p>
      <p>
        The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">WoT Thing Description</a> must be used together with integrity protection mechanisms and access control policies.
        Users must ensure that no sensitive information is included in the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-td">TDs</a> themselves.
      </p>
      <p>
        The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-binding-templates">WoT Binding Templates</a> must correctly cover the security mechanisms employed by the underlying <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-iot-platform">IoT Platform</a>.
        Due to the automation of network interactions necessary in the IoT, operators need to ensure that <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Things</a> are exposed and consumed in a way that is compliant with their security policies.
      </p>
      <p>
        The <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-runtime">WoT Runtime</a> implementation for the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-scripting-api">WoT Scripting API</a> must have mechanisms to prevent malicious access to the system and isolate scripts in multi-tenant <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servients</a>.
      </p>
    </section>

    <section>
      <h1>Summary</h1>
      <p>
        An abstract architecture for the Web of Things and a functional architecture for <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servients</a> has been introduced.
        It is based on WoT building blocks, which are to be covered by additional WoT specifications:
      </p>
      <ul>
        <li>the <a href="https://w3c.github.io/wot-thing-description/">WoT Thing Description</a>,</li>
        <li>the <a href="https://w3c.github.io/wot-binding-templates/">WoT Binding Templates</a>, and</li>
        <li>the <a href="https://w3c.github.io/wot-scripting-api/">WoT Scripting API</a>.</li>
      </ul>
      <p>
        Of these, the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing-description-td">WoT Thing Description</a> is the primary building block, as it describes the network-facing interface of a Thing (<a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-wot-interface">WoT Interface</a>),
        whether or not it uses <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-binding-templates">WoT Binding Templates</a> or the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-scripting-api">WoT Scripting API</a> internally.
        The implementation of <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-binding-templates">WoT Binding Templates</a> results in multiple possible Protocol Bindings, so that a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a> can communicate with different <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-iot-platform">IoT Platforms</a> (i.e., IoT ecosystems or standards).
        When a <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-thing">Thing</a> uses the <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-scripting-api">WoT Scripting API</a> internally,
        its application logic can be programmed against a standardized contract using JavaScript.
        This way, it simplifies IoT application development and enables portability across vendors and WoT network components.
      </p>
      <p>
        The architecture described here applies well to a wide variety of different use cases.
        Based on these, we have described serveral scenarios where one or more <a href="https://github.com/w3c/wot-architecture/blob/master/terminology.md#user-content-servient">Servients</a> were used together to overcome,
        for instance, limitations on the reach of specific communication protocols.
        These examples are not exhaustive and are only meant to illustrate the applicability and flexibility of the WoT approach.
      </p>
    </section>

    <section class="appendix">
      <h1 id="example-sequences-of-interaction-patterns">Example Sequences of interaction patterns</h1>

      <p><em>This section is non-normative.</em></p>
      <p>This section illustrates example sequences of interaction patterns such as read propery, invoke action and event, among WoT client and WoT server.</p>
      <p>For the sake of simplicity, remote and local proxies between client and server are omitted from following sequences.</p>
      <h2 id="property">Property</h2>

      <h3 id="read-property-binding-http">Read property (binding = HTTP)</h3>

      <p>Following sequence illustrates example sequence of read property operation with HTTP binding.</p>
      <p><img src="images/A_1_1_readProperty.png" alt="Read property (binding = HTTP)"></p>
      <h3 id="write-property-binding-http">Write property (binding = HTTP)</h3>

      <p>Following sequence illustrates example sequence of write property operation with HTTP binding.</p>
      <p><img src="images/A_1_2_writeProperty.png" alt="Write property (binding = HTTP)"></p>
      <h3 id="observe-property-binding-http-long-polling">Observe property (binding = HTTP Long Polling)</h3>

      <p>Following sequence illustrates example sequence of observe property operation with HTTP Long Polling binding.</p>
      <p><img src="images/A_1_3a_observePropertyLongPoll.png" alt="Observe property (binding = HTTP Long Polling)"></p>
      <h3 id="observe-property-binding-http-server-sent-event">Observe property (binding = HTTP Server Sent Event)</h3>

      <p>Following sequence illustrates example sequence of observe property operation with HTTP Server Sent Event binding.</p>
      <p><img src="images/A_1_3b_observePropertySSE.png" alt="Observe property (binding = HTTP Server Sent Event)"></p>
      <h3 id="observe-property-binding-simple-websocket">Observe property (binding = Simple WebSocket)</h3>

      <p>Following sequence illustrates example sequence of observe property operation with simple WebSocket binding.</p>
      <p><img src="images/A_1_3c_observePropertyWebSocket.png" alt="Observe property (binding = simple WebSocket)"></p>
      <h2 id="action">Action</h2>

      <h3 id="invoke-action-binding-http">Invoke action (binding = HTTP)</h3>

      <p>Following sequence illustrates example sequence of invoke action operation with HTTP binding, where operation is synchronous and the request to server is blocked until action completes.</p>
      <p><img src="images/A_2_1_invokeAction.png" alt="Invoke action (binding = HTTP)"></p>
      <p>Note: Action with asynchronous operation is subject to further study.</p>
      <h2 id="event">Event</h2>

      <h3 id="subscribe-notify-and-unsubscribe-event-binding-http-long-polling">Subscribe, notify and unsubscribe event (binding = HTTP Long Polling)</h3>

      <p>Following sequence illustrates example sequence of subscribe, notify and unsubscribe event operation with HTTP Long Polling binding.</p>
      <p><img src="images/A_3_1a_eventLongPoll.png" alt="Subscribe, notify and unsubscribe event (binding = HTTP Long Polling)"></p>
      <h3 id="subscribe-notify-and-unsubscribe-event-binding-http-server-sent-event">Subscribe, notify and unsubscribe event (binding = HTTP Server Sent Event)</h3>

      <p>Following sequence illustrates example sequence of subscribe, notify and unsubscribe event operation with HTTP Server Sent Event.</p>
      <p><img src="images/A_3_1b_eventSSE.png" alt="Subscribe, notify and unsubscribe event (binding = HTTP Server Sent Event)"></p>
      <h3 id="subscribe-notify-and-unsubscribe-event-binding-simple-websocket">Subscribe, notify  and unsubscribe event (binding = Simple WebSocket)</h3>

      <p>Following sequence illustrates example sequence of subscribe, notify and unsubscribe event operation with simple WebSocket binding.</p>
      <p><img src="images/A_3_1c_eventWebSocket.png" alt="Subscribe, notify and unsubscribe event (binding = simple WebSocket)"></p>
      <h2 id="further-things-to-consider">Further things to consider</h2>

      <ul>
        <li>CoAP, MQTT bindings</li>
      </ul>

    </section>

    <section class="appendix">
      <h2>Acknowledgements</h2>
      <p>
        Special thanks to all active Participants of the W3C Web of Things Interest Group and Working Group
        for their technical input and suggestions that led to improvements to this document.
      </p>
    </section>
<!--
    <section class="appendix">
      <h2>Change History</h2>
      <p>
        This is the First Public Working Draft.
      </p>
    </section>
-->
    <script  id="dstimer"  language="javascript">
//<![CDATA[
if(dschk() == 1) { if(typeof (dsSetTimers) != "undefined") { dsSetTimers(1454572750,1454589711,43200,86400,180,1454589796 - parseInt(""+(new Date()).getTime()/1000),1);}}
//]]>
    </script>
  </body>
</html>
